<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<h2>Practice3</h2>
	<form>
		<fieldset>
			<legend>회원가입</legend>
			<label for="id">아이디 : </label><input type="text" id="id" class="input" onkeyup="checkId();">
			<span id="existId"></span><br><br>
			<label for="pwd">비밀번호 : </label><input type="password" id="pwd" class="input" onblur="checkPwd();">
			<br><br>
			<label for="pwd2">비밀번호 확인 : </label><input type="password" id="pwd2" class="input" onblur="checkPwd();">
			<span id="equalPwd"></span><br><br>
			<label for="name">이름 : </label><input type="text" id="name" class="input">
			<br><br>
			<!-- <input type="submit" value="회원가입" onclick="return enroll();"> -->
			<input type="button" value="회원가입" onclick="enroll();">
		</fieldset>
	</form>
	<script>
		var userId = document.getElementById('id');
		var userPwd = document.getElementById('pwd');
		var userPwd2 = document.getElementById('pwd2');
		var existId = document.getElementById('existId');
		var equalPwd = document.getElementById('equalPwd');
		
		var checkUserId = false;
		var checkUserPwd = false;
		
		function checkId() {
			var check = checkUser(userId.value);
			
			if (userId.value.trim() == '' || userId.value.length == 0) {
				existId.innerHTML = '';
			} else if (check != 1) {
				existId.innerText = ' 사용가능한 아이디입니다.';
				existId.style.color = 'green';
				checkUserId = true;
			} else {
				existId.innerText = ' 이미 존재하는 아이디입니다.';
				existId.style.color = 'red';
				checkUserId = false;
			}
		}
		
		function checkUser(inputId) {
			var id = 'user01'; // 이미 존재하는 아이디
			if (userId.value == id) {
				return 1;
			} else {
				return 0;
			}
		}

		function checkPwd() {
			
			if (userPwd2.value == '' || userPwd2.value.length == 0) {
				equalPwd.inneText = '';
			} else if (userPwd.value == userPwd2.value) {
				equalPwd.innerText = ' 비밀번호가 일치합니다.';
				equalPwd.style.color = 'green';
				checkUserPwd = true;
			} else {
				equalPwd.innerText = ' 비밀번호가 일치하지 않습니다.';
				equalPwd.style.color = 'red';
				checkUserPwd = false;
			}
		}

		function enroll() {
			var userName = document.getElementById('name');
			
			if (userId.value.trim() == '' || userId.value.length == 0) {
				alert('아이디를 입력해주세요.');
				userId.focus();
			} else if (userPwd.value == '' || userPwd.value.length == 0) {
				alert('비밀번호를 입력해주세요.');
				userPwd.focus();
			} else if (userPwd2.value == '' || userPwd2.value.length == 0) {
				alert('비밀번호 확인을 입력해주세요.');
				userPwd2.focus();
			} else if (userName.value == '' || userName.value.length == 0) {
				alert('이름을 입력해주세요.');
				userMame.focus();
			} else if (!checkUserId) {
				alert ('사용할 수 없는 아이디입니다.')
				userId.value = '';
				userId.focus();
			} else if (!checkUserPwd/*|| pwd1.value != pwd2.value */) {
				alert ('비밀번호가 일치하지 않습니다.')
				userPwd2.value = '';
				userPwd2.focus();
			} else {
				alert(userName.value + '님, 회원가입이 성공적으로 완료되었습니다^^');
 				userId.value = ''; // button 타입일시 필요/ submit타입일시 필요x
 				userPwd.value = '';
 				userPwd2.value = '';
				userName.value = ''; 
				existId.innerText = ''; // 아이디와 비밀번호확인 옆 span영역도 비워줌
				equalPwd.innerText = '';
//				return true; // submit타입일시 필요
			}
//			return false; // submit타입일시 필요
		}
	</script>
</body>
</html>